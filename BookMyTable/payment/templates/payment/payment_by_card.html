{% extends "layout.html" %}

{% block title %}
Payment by Card - {{ reservation.restaurant.R_Name }}
{% endblock %}

{% block content %}
<h2>Payment by Card at {{ reservation.restaurant.R_Name }}</h2>

<p><strong>Reservation ID:</strong> {{ reservation.id }}</p>
<p><strong>Table ID:</strong> {{ reservation.table.T_ID }}</p>
<p><strong>Reservation Cost:</strong> ${{ reservation.reservation_cost }}</p>

<h3>Choose Your Payment Option</h3>
<form method="post">
    {% csrf_token %}
    <label for="card_option">Select a Card:</label>
    <select id="card_option" name="card_option">
        {% for card in user.cards.all %}
            <option value="{{ card.id }}">{{ card.card_name }}</option>
        {% empty %}
            <option>No cards available, please add one</option>
        {% endfor %}
    </select><br><br>

    <button type="submit">Pay Now</button>
</form>

<h3>Add New Card</h3>
<form method="post">
    {% csrf_token %}
    <label for="new_card_number">Card Number:</label>
    <input type="text" id="new_card_number" name="new_card_number" required><br><br>

    <label for="new_card_expiry">Expiration Date:</label>
    <input type="date" id="new_card_expiry" name="new_card_expiry" required><br><br>

    <label for="new_card_cvc">CVC:</label>
    <input type="text" id="new_card_cvc" name="new_card_cvc" required><br><br>

    <button type="submit">Add Card</button>
</form>
{% endblock %}
